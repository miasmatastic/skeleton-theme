{% comment %}
  Lifestyle Showcase 5-Up Section
  
  Premium 5-column horizontal showcase section inspired by modern lifestyle brands.
  Each card can be individually styled with custom backgrounds, gradients, overlay images,
  and flexible linking options. Perfect for highlighting different product categories,
  collections, or lifestyle messaging.
  
  Features:
  - 5 individual cards with complete customization
  - Background options: solid colors, gradients, images
  - Overlay images with positioning and opacity controls
  - Flexible linking: products, collections, pages, external URLs
  - Advanced styling: borders, shadows, typography
  - Responsive design with mobile optimization
  - Accessibility compliant with ARIA labels and keyboard navigation
  - Performance optimized with lazy loading
{% endcomment %}

{% liquid
  assign section_id = 'lifestyle-showcase-' | append: section.id
  assign section_class = 'lifestyle-showcase'
  
  # Section settings
  assign card_height = section.settings.card_height | default: 320
  assign gap_size = section.settings.gap_size | default: 16
  assign enable_animations = section.settings.enable_animations | default: true
  assign mobile_columns = section.settings.mobile_columns | default: 1
  
  # Get active blocks (maximum 5)
  assign active_blocks = section.blocks | where: 'type', 'lifestyle_card' | slice: 0, 5
%}

<section 
  id="{{ section_id }}"
  class="{{ section_class }} {{ section_class }}--{{ section.settings.color_scheme }}"
  style="
    --card-height: {{ card_height }}px;
    --gap-size: {{ gap_size }}px;
    --mobile-columns: {{ mobile_columns }};
    --section-padding-top: {{ section.settings.padding_top | default: 60 }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom | default: 60 }}px;
  "
  aria-label="{{ section.settings.heading | default: 'Lifestyle Showcase' | escape }}"
>
  <div class="container">
    {% comment %} Section Header {% endcomment %}
    {% if section.settings.heading != blank or section.settings.subheading != blank %}
      <header class="lifestyle-showcase__header">
        {% if section.settings.heading != blank %}
          <h2 class="lifestyle-showcase__heading">
            {{ section.settings.heading }}
          </h2>
        {% endif %}
        
        {% if section.settings.subheading != blank %}
          <p class="lifestyle-showcase__subheading">
            {{ section.settings.subheading }}
          </p>
        {% endif %}
      </header>
    {% endif %}
    
    {% comment %} Cards Grid {% endcomment %}
    <div 
      class="lifestyle-showcase__grid"
      role="group"
      aria-label="Lifestyle cards"
    >
      {% if active_blocks.size > 0 %}
        {% for block in active_blocks %}
          {% render 'lifestyle-card',
            card_settings: block.settings,
            card_index: forloop.index,
            section_settings: section.settings
          %}
        {% endfor %}
        
        {% comment %} Fill remaining slots with placeholder cards if needed {% endcomment %}
        {% assign remaining_slots = 5 | minus: active_blocks.size %}
        {% if remaining_slots > 0 and section.settings.show_placeholders %}
          {% for i in (1..remaining_slots) %}
            <div class="lifestyle-card lifestyle-card--placeholder">
              <div class="lifestyle-card__placeholder-content">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <polyline points="21,15 16,10 5,21"/>
                </svg>
                <p>Add card {{ active_blocks.size | plus: i }}</p>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      {% else %}
        {% comment %} Empty state with 5 placeholder cards {% endcomment %}
        {% for i in (1..5) %}
          <div class="lifestyle-card lifestyle-card--placeholder">
            <div class="lifestyle-card__placeholder-content">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21,15 16,10 5,21"/>
              </svg>
              <h3>Card {{ i }}</h3>
              <p>Configure this card in the theme editor</p>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
    
    {% comment %} Optional Call-to-Action Footer {% endcomment %}
    {% if section.settings.show_footer_cta and section.settings.footer_button_text != blank %}
      <footer class="lifestyle-showcase__footer">
        <a 
          href="{{ section.settings.footer_button_link | default: '#' }}"
          class="lifestyle-showcase__footer-button"
        >
          {{ section.settings.footer_button_text }}
        </a>
      </footer>
    {% endif %}
  </div>
</section>

{% comment %} Section Styles {% endcomment %}
<style>
  .lifestyle-showcase {
    padding: var(--section-padding-top) 0 var(--section-padding-bottom);
    overflow: hidden;
  }
  
  .lifestyle-showcase .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }
  
  /* Header Styles */
  .lifestyle-showcase__header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .lifestyle-showcase__heading {
    font-size: clamp(2rem, 4vw, 3.5rem);
    font-weight: 800;
    color: var(--color-foreground);
    margin: 0 0 1rem 0;
    line-height: 1.2;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .lifestyle-showcase__subheading {
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: var(--color-foreground);
    opacity: 0.8;
    margin: 0;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.5;
  }
  
  /* Grid Layout */
  .lifestyle-showcase__grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: var(--gap-size);
    align-items: stretch;
    /* Ensure grid never wraps and cards scale down instead */
    min-width: 0; /* Allow grid items to shrink below their content size */
  }
  
  /* Ensure cards can shrink properly */
  .lifestyle-card {
    min-width: 0; /* Allow cards to shrink below their content size */
    overflow: hidden; /* Prevent content overflow on small screens */
  }
  
  /* Placeholder Cards */
  .lifestyle-card--placeholder {
    background: var(--color-background);
    border: 2px dashed var(--color-border);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: var(--card-height);
    color: var(--color-foreground);
    opacity: 0.6;
    transition: all 0.3s ease;
  }
  
  .lifestyle-card--placeholder:hover {
    opacity: 0.8;
    border-color: var(--color-foreground);
  }
  
  .lifestyle-card__placeholder-content {
    text-align: center;
    padding: 2rem;
  }
  
  .lifestyle-card__placeholder-content svg {
    margin-bottom: 1rem;
    opacity: 0.5;
  }
  
  .lifestyle-card__placeholder-content h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
  }
  
  .lifestyle-card__placeholder-content p {
    font-size: 0.875rem;
    margin: 0;
    opacity: 0.7;
  }
  
  /* Footer CTA */
  .lifestyle-showcase__footer {
    text-align: center;
    margin-top: 3rem;
  }
  
  .lifestyle-showcase__footer-button {
    display: inline-block;
    background: var(--color-button);
    color: var(--color-button-text);
    padding: 1rem 2rem;
    border-radius: 50px;
    font-weight: 600;
    text-decoration: none;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
    border: 2px solid var(--color-button);
  }
  
  .lifestyle-showcase__footer-button:hover {
    background: transparent;
    color: var(--color-button);
    transform: translateY(-2px);
  }
  
  /* Responsive Design - Scale down instead of dropping cards */
  @media screen and (max-width: 1200px) {
    .lifestyle-showcase__grid {
      /* Keep 5 columns but allow smaller gap */
      gap: calc(var(--gap-size) * 0.75);
    }
    
    .lifestyle-showcase .container {
      padding: 0 1.5rem;
    }
  }
  
  @media screen and (max-width: 990px) {
    .lifestyle-showcase__grid {
      /* Keep 5 columns but with smaller gap */
      gap: calc(var(--gap-size) * 0.5);
    }
    
    .lifestyle-showcase__header {
      margin-bottom: 2rem;
    }
  }
  
  @media screen and (max-width: 768px) {
    .lifestyle-showcase__grid {
      /* Still keep 5 columns on mobile, with minimal gap */
      gap: calc(var(--gap-size) * 0.4);
    }
    
    .lifestyle-showcase .container {
      padding: 0 0.75rem;
    }
    
    .lifestyle-showcase__header {
      margin-bottom: 1.5rem;
    }
  }
  
  @media screen and (max-width: 480px) {
    .lifestyle-showcase__grid {
      /* Force minimum viable size while keeping 5 columns */
      gap: calc(var(--gap-size) * 0.25);
    }
    
    .lifestyle-showcase .container {
      padding: 0 0.5rem;
    }
    
    .lifestyle-showcase {
      padding: calc(var(--section-padding-top) * 0.7) 0 calc(var(--section-padding-bottom) * 0.7);
    }
  }
  
  /* Ultra small screens - absolute minimum */
  @media screen and (max-width: 360px) {
    .lifestyle-showcase__grid {
      gap: 4px; /* Minimum gap */
    }
    
    .lifestyle-showcase .container {
      padding: 0 0.25rem;
    }
  }
  
  /* Animation Support */
  {% if enable_animations %}
    .lifestyle-showcase__grid {
      animation: fadeInUp 0.8s ease-out;
    }
    
    .lifestyle-card {
      animation: fadeInScale 0.6s ease-out backwards;
    }
    
    .lifestyle-card:nth-child(1) { animation-delay: 0.1s; }
    .lifestyle-card:nth-child(2) { animation-delay: 0.2s; }
    .lifestyle-card:nth-child(3) { animation-delay: 0.3s; }
    .lifestyle-card:nth-child(4) { animation-delay: 0.4s; }
    .lifestyle-card:nth-child(5) { animation-delay: 0.5s; }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
  {% endif %}
  
  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .lifestyle-showcase__grid,
    .lifestyle-card {
      animation: none !important;
    }
  }
  
  /* High contrast mode */
  @media (prefers-contrast: high) {
    .lifestyle-card--placeholder {
      border-width: 3px;
    }
  }
  
  /* Custom section CSS */
  {{ section.settings.custom_css }}
</style>

{% schema %}
{
  "name": "Lifestyle 5-Up Showcase",
  "class": "lifestyle-showcase-section",
  "max_blocks": 5,
  "blocks": [
    {
      "type": "lifestyle_card",
      "name": "Lifestyle Card",
      "settings": [
        {
          "type": "header",
          "content": "📝 Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "GOOD VIBES"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "SHOP NOW"
        },
        {
          "type": "header",
          "content": "🔗 Linking"
        },
        {
          "type": "select",
          "id": "link_type",
          "label": "Link Type",
          "options": [
            { "value": "none", "label": "No Link" },
            { "value": "product", "label": "Product" },
            { "value": "collection", "label": "Collection" },
            { "value": "page", "label": "Page" },
            { "value": "url", "label": "Custom URL" }
          ],
          "default": "collection"
        },
        {
          "type": "product",
          "id": "link_product",
          "label": "Select Product"
        },
        {
          "type": "collection",
          "id": "link_collection",
          "label": "Select Collection"
        },
        {
          "type": "page",
          "id": "link_page",
          "label": "Select Page"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Custom URL"
        },
        {
          "type": "header",
          "content": "🎨 Background"
        },
        {
          "type": "select",
          "id": "background_type",
          "label": "Background Type",
          "options": [
            { "value": "color", "label": "Solid Color" },
            { "value": "gradient", "label": "Gradient" },
            { "value": "image", "label": "Image" }
          ],
          "default": "gradient"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background Color",
          "default": "#ff6b35"
        },
        {
          "type": "color",
          "id": "gradient_color_1",
          "label": "Gradient Color 1",
          "default": "#ff6b35"
        },
        {
          "type": "color",
          "id": "gradient_color_2",
          "label": "Gradient Color 2",
          "default": "#f7931e"
        },
        {
          "type": "select",
          "id": "gradient_direction",
          "label": "Gradient Direction",
          "options": [
            { "value": "diagonal", "label": "Diagonal (135°)" },
            { "value": "horizontal", "label": "Horizontal" },
            { "value": "vertical", "label": "Vertical" },
            { "value": "radial", "label": "Radial" }
          ],
          "default": "diagonal"
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background Image"
        },
        {
          "type": "select",
          "id": "background_position",
          "label": "Background Position",
          "options": [
            { "value": "center", "label": "Center" },
            { "value": "top", "label": "Top" },
            { "value": "bottom", "label": "Bottom" },
            { "value": "left", "label": "Left" },
            { "value": "right", "label": "Right" }
          ],
          "default": "center"
        },
        {
          "type": "header",
          "content": "🖼️ Overlay Image"
        },
        {
          "type": "image_picker",
          "id": "overlay_image",
          "label": "Overlay Image",
          "info": "Optional decorative image to overlay on the card"
        },
        {
          "type": "select",
          "id": "overlay_position",
          "label": "Overlay Position",
          "options": [
            { "value": "center", "label": "Center" },
            { "value": "top-left", "label": "Top Left" },
            { "value": "top-right", "label": "Top Right" },
            { "value": "bottom-left", "label": "Bottom Left" },
            { "value": "bottom-right", "label": "Bottom Right" }
          ],
          "default": "bottom-right"
        },
        {
          "type": "range",
          "id": "overlay_size",
          "label": "Overlay Size",
          "min": 20,
          "max": 100,
          "step": 5,
          "unit": "%",
          "default": 50
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "Overlay Opacity",
          "min": 10,
          "max": 100,
          "step": 5,
          "unit": "%",
          "default": 80
        },
        {
          "type": "checkbox",
          "id": "gradient_overlay",
          "label": "Add Gradient Overlay",
          "default": false,
          "info": "Adds a color overlay for better text readability"
        },
        {
          "type": "color",
          "id": "gradient_overlay_color",
          "label": "Gradient Overlay Color",
          "default": "rgba(0,0,0,0.3)"
        },
        {
          "type": "range",
          "id": "gradient_overlay_opacity",
          "label": "Gradient Overlay Opacity",
          "min": 10,
          "max": 80,
          "step": 5,
          "unit": "%",
          "default": 30
        },
        {
          "type": "header",
          "content": "✏️ Typography & Style"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text Color",
          "default": "#ffffff"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text Alignment",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "center"
        },
        {
          "type": "range",
          "id": "title_size",
          "label": "Title Size",
          "min": 16,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 24
        },
        {
          "type": "select",
          "id": "title_weight",
          "label": "Title Weight",
          "options": [
            { "value": "300", "label": "Light" },
            { "value": "400", "label": "Normal" },
            { "value": "500", "label": "Medium" },
            { "value": "600", "label": "Semi Bold" },
            { "value": "700", "label": "Bold" },
            { "value": "800", "label": "Extra Bold" }
          ],
          "default": "700"
        },
        {
          "type": "header",
          "content": "🎯 Border & Effects"
        },
        {
          "type": "select",
          "id": "border_style",
          "label": "Border Style",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "solid", "label": "Solid" },
            { "value": "dashed", "label": "Dashed" },
            { "value": "dotted", "label": "Dotted" }
          ],
          "default": "none"
        },
        {
          "type": "range",
          "id": "border_width",
          "label": "Border Width",
          "min": 0,
          "max": 10,
          "step": 1,
          "unit": "px",
          "default": 0
        },
        {
          "type": "color",
          "id": "border_color",
          "label": "Border Color",
          "default": "#e0e0e0"
        },
        {
          "type": "range",
          "id": "border_radius",
          "label": "Border Radius",
          "min": 0,
          "max": 50,
          "step": 2,
          "unit": "px",
          "default": 12
        },
        {
          "type": "range",
          "id": "shadow_blur",
          "label": "Shadow Blur",
          "min": 0,
          "max": 30,
          "step": 2,
          "unit": "px",
          "default": 8
        },
        {
          "type": "color",
          "id": "shadow_color",
          "label": "Shadow Color",
          "default": "rgba(0,0,0,0.1)"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "📋 Section Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "SUCCESS COMES IN MANY FORMS"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Section Subheading",
      "default": "Find your own path to happiness and freedom."
    },
    {
      "type": "header",
      "content": "🎛️ Layout Settings"
    },
    {
      "type": "range",
      "id": "card_height",
      "label": "Card Height",
      "min": 200,
      "max": 500,
      "step": 20,
      "unit": "px",
      "default": 320
    },
    {
      "type": "range",
      "id": "gap_size",
      "label": "Gap Between Cards",
      "min": 8,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "select",
      "id": "mobile_columns",
      "label": "Mobile Columns",
      "options": [
        { "value": "1", "label": "1 Column" },
        { "value": "2", "label": "2 Columns" }
      ],
      "default": "1"
    },
    {
      "type": "checkbox",
      "id": "show_placeholders",
      "label": "Show Empty Card Placeholders",
      "default": true,
      "info": "Shows placeholder cards for unfilled slots"
    },
    {
      "type": "checkbox",
      "id": "enable_animations",
      "label": "Enable Animations",
      "default": true
    },
    {
      "type": "header",
      "content": "🎨 Design"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "🔗 Footer Call-to-Action"
    },
    {
      "type": "checkbox",
      "id": "show_footer_cta",
      "label": "Show Footer Button",
      "default": false
    },
    {
      "type": "text",
      "id": "footer_button_text",
      "label": "Footer Button Text"
    },
    {
      "type": "url",
      "id": "footer_button_link",
      "label": "Footer Button Link"
    },
    {
      "type": "header",
      "content": "📏 Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "header",
      "content": "🛠️ Advanced"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS",
      "placeholder": ".lifestyle-showcase { ... }",
      "info": "Add custom CSS for advanced styling"
    }
  ],
  "presets": [
    {
      "name": "🎨 Lifestyle 5-Up Showcase",
      "category": "Image",
      "settings": {
        "heading": "SUCCESS COMES IN MANY FORMS",
        "subheading": "Find your own path to happiness and freedom.",
        "card_height": 320,
        "gap_size": 16,
        "mobile_columns": "1",
        "enable_animations": true,
        "padding_top": 60,
        "padding_bottom": 60
      },
      "blocks": [
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "GOOD VIBES",
            "button_text": "SHOP NOW",
            "link_type": "collection",
            "background_type": "gradient",
            "gradient_color_1": "#ff6b35",
            "gradient_color_2": "#f7931e",
            "text_color": "#ffffff",
            "text_alignment": "center",
            "title_size": 24,
            "title_weight": "700",
            "border_radius": 12,
            "shadow_blur": 8
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "KEEP GOING",
            "button_text": "SHOP NOW",
            "link_type": "collection",
            "background_type": "gradient",
            "gradient_color_1": "#f39c12",
            "gradient_color_2": "#e67e22",
            "text_color": "#ffffff",
            "text_alignment": "center",
            "title_size": 24,
            "title_weight": "700",
            "border_radius": 12,
            "shadow_blur": 8
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "OPTIMISM",
            "button_text": "SHOP NOW",
            "link_type": "collection",
            "background_type": "gradient",
            "gradient_color_1": "#f1c40f",
            "gradient_color_2": "#f39c12",
            "text_color": "#2c3e50",
            "text_alignment": "center",
            "title_size": 24,
            "title_weight": "700",
            "border_radius": 12,
            "shadow_blur": 8
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "BRÜGE",
            "button_text": "SHOP NOW",
            "link_type": "collection",
            "background_type": "gradient",
            "gradient_color_1": "#ecf0f1",
            "gradient_color_2": "#bdc3c7",
            "text_color": "#2c3e50",
            "text_alignment": "center",
            "title_size": 24,
            "title_weight": "700",
            "border_radius": 12,
            "shadow_blur": 8
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "STYLE",
            "button_text": "SHOP NOW",
            "link_type": "collection",
            "background_type": "gradient",
            "gradient_color_1": "#27ae60",
            "gradient_color_2": "#2ecc71",
            "text_color": "#ffffff",
            "text_alignment": "center",
            "title_size": 24,
            "title_weight": "700",
            "border_radius": 12,
            "shadow_blur": 8
          }
        }
      ]
    },
    {
      "name": "🌟 Brand Categories",
      "category": "Image",
      "settings": {
        "heading": "SHOP BY CATEGORY",
        "subheading": "Discover our curated collections",
        "card_height": 280,
        "gap_size": 20,
        "mobile_columns": "2"
      },
      "blocks": [
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "NEW ARRIVALS",
            "subtitle": "Latest styles",
            "button_text": "EXPLORE",
            "background_type": "color",
            "background_color": "#2c3e50",
            "text_color": "#ffffff",
            "border_radius": 16
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "BEST SELLERS",
            "subtitle": "Customer favorites",
            "button_text": "SHOP",
            "background_type": "color",
            "background_color": "#e74c3c",
            "text_color": "#ffffff",
            "border_radius": 16
          }
        },
        {
          "type": "lifestyle_card",
          "settings": {
            "title": "SALE",
            "subtitle": "Up to 50% off",
            "button_text": "SAVE NOW",
            "background_type": "color",
            "background_color": "#f39c12",
            "text_color": "#ffffff",
            "border_radius": 16
          }
        }
      ]
    }
  ]
}
{% endschema %}